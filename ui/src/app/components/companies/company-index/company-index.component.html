<app-index-header (search)="onSearch($event)" (refresh)="onRefresh()" titleKey="COMPANIES"></app-index-header>
<mat-progress-bar *ngIf="getLoading" mode="determinate" [value]="progress"></mat-progress-bar>
<div class="container buffer-lg-top">
  <mat-progress-spinner class="centered-content" *ngIf="deleteLoading; else companyIndex"
                        mode="indeterminate"></mat-progress-spinner>

  <ng-template #companyIndex>
    <div *ngIf="progress === 100">
      <ngx-masonry>
        <div ngxMasonryItem class="masonry-item" *ngFor="let company of paginatedCompanies">
          <app-company-item [company]="company" (edit)="onEdit($event)" (delete)="onDelete($event)"></app-company-item>
        </div>
      </ngx-masonry>

      <div class="text-align-center" *ngIf="limit < filteredCompanies.length">
        <button mat-raised-button color="primary" class="centered-content" (click)="onLoadMore()">
          {{ 'LOAD_MORE' | message }}
        </button>
      </div>
    </div>
  </ng-template>
</div>
